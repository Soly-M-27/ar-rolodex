<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script>

        const showButtons = () => {
            const buttonSpread = document.querySelector("#buttonSpread");
            const pinterest = document.querySelector("#pinteresitBtn");
            const linkdin = document.querySelector("#linkdinBtn");
            const github = document.querySelector("#githubBtn");
            const twitter = document.querySelector("#twitterBtn");

            buttonSpread.setAttribute("visible", true);
            pinterest.setAttribute("visible", true);
            github.setAttribute("visible", true);
            linkdin.setAttribute("visible", true);
            twitter.setAttribute("visible", true);

            pinterest.addEventListener("click", () => {
                console.log("success");
                window.open("https://www.pinterest.com/");
            });

            linkdin.addEventListener("click", () => {
                console.log("success");
                window.open("https://www.linkedin.com/");
            });

            github.addEventListener("click", () => {
                console.log("success");
                window.open("https://www.github.com/");
            });

            twitter.addEventListener("click", () => {
                console.log("success");
                window.open("https://www.twitter.com/");
            });
        }

        const clickModel = () => {
            const model = document.querySelector("#avatarModel");

            model.addEventListener("click", () => {
                console.log("Clicked model");
                showButtons();
            });
        }

        AFRAME.registerComponent('myTarget', {
            init: function () {
                var stringRead = this.data
                console.log(stringRead);
                this.el.addEventListener('targetFound', event => {
                    console.log("target found");
                    clickModel(() => {
                        showButtons();
                    });
                });
                this.el.addEventListener('targetLost', event => {
                    console.log("target found");
                });
            }
        });

    </script>
</head>

<body id="app">
    <a-scene
        mindar-image="imageTargetSrc:https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.mind;"
        color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false">

        <a-assets>

            <img id="card"
                src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.png" />
            <img id="pinterest" src="../../../assets/targets/social_media_icons/Pinterest.png"
                crossorigin="anonymous" />
            <img id="github" src="../../../assets/targets/social_media_icons/GitHub.png" crossorigin="anonymous" />
            <img id="linkdin" src="../../../assets/targets/social_media_icons/Linkedin.png" crossorigin="anonymous" />
            <img id="twitter" src="../../../assets/targets/social_media_icons/Twitter.png" crossorigin="anonymous" />
            <img id="bar" src="../../../assets/AR-Assets/curved_bar_image.png" crossorigin="anonymous" />
            <img id="gradiantBar" src="../../../assets/AR-Assets/gradiant_bar.png" crossorigin="anonymous" />

            <a-asset-item id="avatarModel"
                src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/softmind/scene.gltf">
            </a-asset-item>

        </a-assets>

        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

        <a-entity id="myTarget" mindar-image-target="targetIndex: 0">

            <a-plane src="#card" position="0 0 0" height="0.552" width="1" rotation="0 0 0"></a-plane>

            <a-entity visible="true" id="buttonSpread">

                <a-image visible="true" id="pinterestBtn" src="#pinterest" position="-0.52 0.9 0" height="0.35"
                    width="0.35" class="clickable"></a-image>
                <a-image visible="true" id="githubBtn" src="#github" position="-0.19 0.99 0" height="0.35" width="0.35"
                    class="clickable"></a-image>
                <a-image visible="true" id="linkdinBtn" src="#linkdin" position="0.19 0.99 0" height="0.35" width="0.35"
                    class="clickable"></a-image>

                <a-plane visible="true" width="1.2" height="0.5"
                    material="src: #gradiantBar; transparent: true; alphaTest: 0.01;" align="center"
                    position="0 -0.50 0" text-align="center">
                    <a-text visible="true" value="Mario Ortiz Cruz" align="center" width="3" height="2.2"
                        color="black"></a-text>
                </a-plane>

                <a-plane visible="true" width="1.3" height="0.6"
                    material="src: #bar; transparent: true; alphaTest: 0.01;" align="center" position="0 -0.73 0">
                    <a-text visible="true" value="Software Engineer" align="center" width="3">
                    </a-text>
                </a-plane>

                <a-plane visible="true" width="0.9" height="0.6"
                    material="src: #bar; transparent: true; alphaTest: 0.01;" align="center" position="0 -0.9999 0">
                    <a-text visible="true" value="CodigoM360" align="center" width="3">
                    </a-text>
                </a-plane>

            </a-entity>

            <a-gltf-model rotation="0 0 0 " position="0 0 0.1" scale="0.005 0.005 0.005" src="#avatarModel"
                animation="property: position; to: 0 0.1 0.1; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate"></a-gltf-model>

        </a-entity>
    </a-scene>
</body>

</html>